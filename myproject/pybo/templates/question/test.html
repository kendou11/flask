{% extends 'base.html' %}

{% block content %}
<div class="container">

  <!-- Hero -->
  <section class="py-5 text-center">
    <h2 class="fw-bold mb-3">더 나은 생활을 위한 변화</h2>
    <form class="d-flex justify-content-center" action="{{ url_for('main.index') }}" method="get">
      <div class="input-group" style="max-width: 720px;">
        <span class="input-group-text bg-white border-end-0">
          <i class="fa-solid fa-magnifying-glass"></i>
        </span>
        <input name="q" type="text" class="form-control border-start-0" placeholder="어떤 서비스가 필요하세요?">
        <button class="btn btn-outline-secondary">검색</button>
      </div>
    </form>
  </section>

  <!-- Categories -->
  <section class="mb-4">
    <div class="d-flex gap-3 overflow-auto py-2">
      {% set cats = [
        ('전체보기','fa-bars'),
        ('이사','fa-truck'),
        ('청소','fa-broom'),
        ('설치','fa-screwdriver-wrench'),
        ('수리','fa-screwdriver'),
        ('인테리어','fa-couch'),
        ('이벤트','fa-gift'),
        ('뷰티','fa-wand-magic-sparkles'),
        ('의류','fa-shirt'),
        ('의료','fa-briefcase-medical'),
        ('취업','fa-briefcase')
      ] %}
      {% for name, icon in cats %}
      <div class="border rounded-4 px-4 py-3 text-center flex-shrink-0">
        <div class="mb-2"><i class="fa-solid {{ icon }} fa-lg"></i></div>
        <div class="fw-semibold">{{ name }}</div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Banner -->
  <section class="mb-5">
    <div id="mainBanner" class="carousel slide">
      <div class="carousel-inner rounded-4 overflow-hidden shadow-sm">
        <div class="carousel-item active">
          <img class="d-block w-100" src="{{ url_for('static', filename='images/adbanner1.png') }}" alt="banner1">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="{{ url_for('static', filename='images/adbanner2.png') }}" alt="banner2">
        </div>
        <div class="carousel-item">
          <img class="d-block w-100" src="{{ url_for('static', filename='images/adbanner3.png') }}" alt="banner3">
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#mainBanner" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#mainBanner" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
      </button>
    </div>
  </section>

  <!-- Best Store -->
  <section class="mb-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3 class="m-0 fw-bold">BEST STORE</h3>
      <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('store._list') }}">전체보기 &gt;</a>
    </div>

    <div class="row g-3 row-cols-1 row-cols-sm-2 row-cols-lg-3">
      {% for item in best_stores or [] %}
      <div class="col">
        <a href="{{ url_for('store.detail', store_id=item.id) }}" class="text-decoration-none text-reset">
          <div class="card h-100 border-0 shadow-sm">
            {% if item.image_url %}
              <img src="{{ item.image_url }}" class="card-img-top" alt="{{ item.title }}">
            {% else %}
              <img src="{{ url_for('static', filename='images/placeholder.png') }}" class="card-img-top" alt="placeholder">
            {% endif %}
            <div class="card-body">
              <h5 class="card-title mb-1">{{ item.title }}</h5>
              <div class="text-muted small">{{ item.price|default(0) }}원</div>
            </div>
          </div>
        </a>
      </div>
      {% else %}
      <!-- 더미 카드 3개 -->
      {% for _ in range(3) %}
      <div class="col">
        <div class="card h-100 border-0 shadow-sm">
          <img src="{{ url_for('static', filename='images/signup_ad1.png') }}" class="card-img-top" alt="demo">
          <div class="card-body">
            <h5 class="card-title mb-1">예시 스토어</h5>
            <div class="text-muted small">100,000원</div>
          </div>
        </div>
      </div>
      {% endfor %}
      {% endfor %}
    </div>
  </section>

</div>
{% endblock %}

